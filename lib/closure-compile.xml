<?xml version="1.0"?>
<project basedir="../" default="compile">

	<property name="jscomp.output" value="${basedir}/www-test/js/env.taskwalls.appspot.com.js" />
	<property name="min.output" value="${basedir}/webapp/js/env.taskwalls.appspot.com.js" />

	<taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask">
		<classpath>
			<fileset dir="${basedir}/www-test/WEB-INF/lib/" includes="*.jar" />
		</classpath>
	</taskdef>
	<target name="compile">
		<jscomp compilationLevel="advanced" warning="verbose" debug="false" output="${jscomp.output}">
			<externs dir="${basedir}/lib/">
				<file name="closure-externs.js" />
			</externs>
			<sources dir="${basedir}/webapp/js/src">
				<file name="util.js" />
				<file name="model.js" />
				<file name="view.calendar.js" />
				<file name="view.header.js" />
				<file name="view.page.js" />
				<file name="jquery.cookie.js" />
				<file name="app.js" />
			</sources>
		</jscomp>
		<concat destfile="${min.output}">
			<fileset dir="${basedir}/webapp/js/lib" includes="*.min.js" />
			<filelist>
				<file name="${jscomp.output}" />
			</filelist>
		</concat>
	</target>

</project>
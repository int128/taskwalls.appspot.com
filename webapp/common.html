<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<!--[if IE]>
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
<![endif]-->
<!--[if lt IE 9]>
<script>
(function(a){for(var i in a){document.createElement(a[i])}})(['header', 'footer', 'section', 'article', 'aside', 'time', 'hgroup'])
</script>
<![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Task Wall</title>
<script>
/* load CSS assets */
(function (s) {
	document.write('<link rel="stylesheet" href="'+s+'"/>')
})(location.hostname == 'localhost' ? '/assets/css' : '/min.css');
</script>
<style>
/* loading indicator */
#loading {
	z-index: 1000;
	width: 80px;
	height: 80px;
	position: fixed;
	top: 50%;
	left: 50%;
	margin-top: -40px;
	margin-left: -40px;
	background-color: rgba(0, 0, 0, 0.9);
	background-image: url('/img/loading2.gif');
	background-repeat: no-repeat;
	background-position: center;
	border-radius: 10px;
	-moz-border-radius: 10px;
}
</style>
</head>
<body>
<div id="loading"></div>
<div id="global-errors" style="display: none;"></div>

<article class="oauth2state unauthorized" id="taskwalls-fastinit" style="display: none;">
<p class="screenshot"></p>
<h1>Task Wall</h1>
<div class="lead">Manage your tasks by way like agile.</div>
<p>
Task WallはGoogleタスクと連携するタスク管理アプリです。<br/>
壁に付箋を貼る感覚でタスクを管理できます。
</p>
<p class="login"><a><button>Googleアカウントでログイン</button></a></p>
<footer>Task Wall &copy; hidetake.org, 2011-2012.</footer>
</article>

<article class="oauth2state authorizing" style="display: none;">
<h1>Task Wall<span style="color: gold;">*</span></h1>
<p>Google APIと通信しています...</p>
</article>

<article class="oauth2state authorized" style="display: none;">
<section class="header">
<h1>Task Wall</h1>
<div style="font-weight: bold; margin-left: 5px; color: #888;">BETA</div>
<section>
<h3>Tasklists</h3>
<div data-bind="foreach: calendar.tasklists" class="toggle tasklists">
<div data-bind="overlappedClick: toggleVisibility,
	css: {visible: visible},
	attr: {'data-tasklistcolor': colorCode}"
	class="tasklist">
<div class="setting"><a data-bind="click: $root.updateTasklistDialog.create"
	href="#" data-intercept="click" class="with-tooltip"
	data-placement="right" title="タスクリストのプロパティを開く"></a></div>
<div data-bind="text: title" class="title"></div>
</div>
</div>
<a data-bind="click: $root.createTasklistDialog.create"
	href="#" class="create tasklist with-tooltip"
	data-placement="right" title="新しいタスクリストを作成する"></a>
</section>
<section class="thisweek with-tooltip" data-placement="right" title="今週のタスクの進捗">
<h3>Tasks</h3>
<div class="fraction numerator"><span data-bind="text: completedCount" class="count"></span></div>
<div class="fraction denominator"><span data-bind="text: count" class="count"></span></div>
</section>
<section>
<div><a data-bind="click: logout" href="#" class="myicon-logout with-tooltip"
	data-placement="right" title="ログアウト"></a></div>
<div><a href="#" class="myicon-help with-tooltip"
	data-placement="right" title="ヘルプ"></a></div>
</section>
<p class="footer">&copy; hidetake.org</p>
</section>

<section class="cache-status">
<!-- ko if: $root.development -->
<label class="checkbox"><input data-bind="checked: offline" type="checkbox"/>オフライン</label>
<!-- /ko -->
<span data-bind="with: lastCached">
最後の読み込みは
<span data-bind="text: getMonth()+1"></span>月
<span data-bind="text: getDate()"></span>日
<span data-bind="text: getHours()"></span>時
<span data-bind="text: getMinutes()"></span>分です。
</span>
</section>

<section data-bind="with: calendar" class="calendar">
<table>
<tbody data-bind="foreach: days">
<tr data-bind="css: {
		past: past,
		thisweek: thisweek
	}, attr: {
		'data-day': date().getDate(),
		'data-weekday': date().getDay()
	}">
<td class="month"><div><span data-bind="text: date().getMonth()+1"></span>月</div></td>
<td class="border day"><div data-bind="text: date().getDate()"></div></td>
<td class="border weekday"><div data-bind="text: weekdayName"></div></td>
<td class="border tasks">
<div data-bind="foreach: tasklists">
<div data-bind="foreach: tasks, visible: tasklist.visible" class="tasklist">
<div data-bind="overlappedClick: $root.updateTaskDialog.create,
	attr: {
		'data-status': status,
		'data-tasklistcolor': tasklist().colorCode
	}"
	class="task">
<input data-bind="checked: isCompleted, click: saveStatus" type="checkbox" data-intercept="click" />
<span data-bind="text: title" class="title"></span>
<div data-bind="text: notes" class="notes"></div>
</div>
</div>
</div>
<div class="create">
<a data-bind="click: $root.createTaskDialog.create"
	href="#" class="with-tooltip"
	data-placement="left" title="新しいタスクを作成する"></a>
</div>
</td>
</tr>
</tbody>
</table>
</section>

<section data-bind="with: calendar.icebox" class="icebox">
<h2>計画中のタスク</h2>
<div class="create">
<a data-bind="click: $root.createTaskDialog.create"
	href="#" class="with-tooltip"
	data-placement="left" title="新しいタスクを作成する"></a>
</div>
<div style="clear: both;"></div>
<div data-bind="foreach: tasklists">
<div data-bind="foreach: tasks, visible: tasklist.visible" class="tasklist">
<div data-bind="overlappedClick: $root.updateTaskDialog.create,
	attr: {
		'data-status': status,
		'data-tasklistcolor': tasklist().colorCode
	}"
	class="task">
<input data-bind="checked: isCompleted, click: saveStatus" type="checkbox" data-intercept="click" />
<span data-bind="text: title" class="title"></span>
<div data-bind="text: notes" class="notes"></div>
</div>
</div>
</div>
</section>

<div data-bind="with: calendar" class="calendar-next">
<a data-bind="click: extendToNextMonth" href="#">
<span data-bind="text: nextMonth().getFullYear()"></span>年
<span data-bind="text: nextMonth().getMonth()+1"></span>月を表示
</a>
</div>

<div data-bind="with: calendar" class="manipulations">
<a data-bind="click: clearCompleted" href="#">完了したタスクを消去する</a>
</div>

<!-- ko if: createTasklistDialog -->
<!-- ko with: createTasklistDialog -->
<form data-bind="submit: save">
<div class="create-tasklist dialog">
<div><input data-bind="value: title, valueUpdate: 'afterkeydown', hasfocus: true" type="text" placeholder="タスクリストの名前" /></div>
<div><button data-bind="enable: title" type="submit" class="btn">タスクリストを作成</button></div>
</div>
</form>
<!-- /ko -->
<div data-bind="click: createTasklistDialog.dispose" class="dialog-background"></div>
<!-- /ko -->

<!-- ko if: updateTasklistDialog -->
<!-- ko with: updateTasklistDialog -->
<div data-bind="style: {top: top}" class="update-tasklist dialog">
<form data-bind="submit: saveTitle">
<input data-bind="value: title" type="text" placeholder="タスクリストの名前" />
</form>
<div data-bind="foreach: colors">
<div data-bind="css: {selected: $data==$parent.selectedColor()}" class="color">
<div data-bind="attr: {'data-tasklistcolor': $data}, click: $parent.selectColor"></div>
</div>
</div>
<div style="clear: both;"></div>
<hr/>
<a data-bind="visible: !removeConfirmed(), click: confirmRemove" href="#">タスクリストを削除する...</a>
<div data-bind="visible: removeConfirmed">
<p><strong>警告:</strong> タスクリストに含まれるすべてのタスクも削除されます。</p>
<button data-bind="click: remove" class="btn btn-danger">タスクリストを削除する</button>
</div>
</div>
<!-- /ko -->
<div data-bind="click: updateTasklistDialog.dispose" class="dialog-background"></div>
<!-- /ko -->

<!-- ko if: createTaskDialog -->
<!-- ko with: createTaskDialog -->
<form data-bind="submit: save">
<div data-bind="style: {top: top}" class="create-task dialog">
<div data-bind="with: due" class="due">
<span data-bind="text: getFullYear()"></span>年
<span data-bind="text: getMonth()+1"></span>月
<span data-bind="text: getDate()"></span>日
</div>
<div><input data-bind="value: title, hasfocus: titleFocus" type="text" placeholder="タスクの件名" /></div>
<div><textarea data-bind="value: notes" placeholder="備考"></textarea></div>
<div data-bind="foreach: tasklists" class="tasklists">
<a data-bind="text: title,
	attr: {'data-tasklistcolor': colorCode},
	css: {selected: $data == $parent.selectedTasklist()},
	click: $parent.selectTasklist"
	href="#" class="tasklist"></a>
</div>
<button type="submit" class="btn">タスクを作成</button>
</div>
</form>
<!-- /ko -->
<div data-bind="click: createTaskDialog.dispose" class="dialog-background"></div>
<!-- /ko -->

<!-- ko if: updateTaskDialog -->
<!-- ko with: updateTaskDialog -->
<div data-bind="style: {top: top}" class="update-task dialog">
<form data-bind="submit: save">
<div><input data-bind="value: title, hasfocus: true" type="text" placeholder="タスクの件名" /></div>
<div><textarea data-bind="value: notes" placeholder="備考"></textarea></div>
<div data-bind="with: due" class="due">
<span data-bind="text: getFullYear()"></span>年
<span data-bind="text: getMonth()+1"></span>月
<span data-bind="text: getDate()"></span>日
<a href="#">期限を変更する...</a>
</div>
<div class="datepicker"><!-- TODO: bind this --></div>
<button type="submit" class="btn">タスクを更新</button>
</form>
<hr/>
<form data-bind="submit: move">
<div data-bind="foreach: tasklists" class="tasklists">
<a data-bind="text: title,
	attr: {'data-tasklistcolor': colorCode},
	css: {selected: $data == $parent.selectedTasklist()},
	click: $parent.selectTasklist"
	href="#" class="tasklist"></a>
</div>
<button data-bind="disable: selectedTasklist() == originalTasklist()" type="submit" class="btn">
別のタスクリストに移動
</button>
</form>
<hr/>
<!-- ko ifnot: removeConfirmed -->
<a data-bind="click: confirmRemove" href="#">タスクを削除する...</a>
<!-- /ko -->
<!-- ko if: removeConfirmed -->
<button data-bind="click: remove" class="btn btn-danger">タスクを削除する</button>
<!-- /ko -->
</div>
<!-- /ko -->
<div data-bind="click: updateTaskDialog.dispose" class="dialog-background"></div>
<!-- /ko -->

<section class="help" style="display: none;">
<div class="tasklists left">
<div class="head"></div>
<div class="body">
<h3>タスクリスト</h3>
<p>場所や優先度に応じてタスクを分類します。</p>
</div>
</div>
<div class="calendar">
<div class="body">
<h3>カレンダー</h3>
<p>
タスクをドラッグして自主期限（ベースライン）を決めます。<br/>
タイトルをクリックすると編集できます。<br/>
空白をクリックすると詳細を編集できます。
</p>
</div>
</div>
<div class="thisweek left">
<div class="head"></div>
<div class="body">
<h3>今週の件数</h3>
<p>
消化したタスクと残っているタスクの数が表示されます。<br/>
数をクリックすると表示が切り替わります。
</p>
</div>
</div>
<div class="icebox">
<div class="body">
<h3>計画中のタスク</h3>
<p>近い将来にやるタスクを追加します。</p>
</div>
</div>
</section>
</article>

<div id="resources" style="display: none;">
<div data-key="global-errors">エラーです。もう一度試してみてください。</div>
<div data-key="weekday0">日</div>
<div data-key="weekday1">月</div>
<div data-key="weekday2">火</div>
<div data-key="weekday3">水</div>
<div data-key="weekday4">木</div>
<div data-key="weekday5">金</div>
<div data-key="weekday6">土</div>
</div>

<script>
/* load JavaScript assets */
(function (s) {
	document.write('<'+'script src="'+s+'"></'+'script>')
})(location.hostname == 'localhost' ? '/assets/js' : '/min.js');
/* show "unauthorize" page before initializing */
(function () {
	if (location.search == '' && localStorage['session'] === undefined) {
		var element = document.getElementById('taskwalls-fastinit');
		if (element) {
			element.removeAttribute('style');  /* show */
		}
	}
})();
</script>
<script>

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3232369-8']);
  _gaq.push(['_trackPageview']);

  location.hostname == 'localhost' ? null :  /* added */
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>